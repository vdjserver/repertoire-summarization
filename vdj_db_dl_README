
#################
# dl_map README #
#################

An example dl_map file is below.  Note that the format is a
tab-separated values format with keys in the first column
and values in the second column. 

NOTE that IgBLAST 1.3 is required.

HUMAN_GL_IG_V	/usr/local/igblast-1.3.0/database_IG/human_gl_V
HUMAN_GL_IG_D	/usr/local/igblast-1.3.0/database_IG/human_gl_D
HUMAN_GL_IG_J	/usr/local/igblast-1.3.0/database_IG/human_gl_J
HUMAN_GL_TR_V	/usr/local/igblast-1.3.0/database_TR/human/human_TR_V
HUMAN_GL_TR_D	/usr/local/igblast-1.3.0/database_TR/human/human_TR_D.fna
HUMAN_GL_TR_J	/usr/local/igblast-1.3.0/database_TR/human/human_TR_J.fna
MOUSE_GL_IG_V	/usr/local/igblast-1.3.0/internal_data/mouse/mouse_V
MOUSE_GL_IG_D	/usr/local/igblast-1.3.0/internal_data/mouse/mouse_D
MOUSE_GL_IG_J	/usr/local/igblast-1.3.0/internal_data/mouse/mouse_J
MOUSE_GL_TR_V	/usr/local/igblast-1.3.0/internal_data/mouse/mouse_TR_V
MOUSE_GL_TR_D	/usr/local/igblast-1.3.0/internal_data/mouse/mouse_TR_D
MOUSE_GL_TR_J	/usr/local/igblast-1.3.0/internal_data/mouse/mouse_TR_J
HUMAN_AUX	/usr/local/igblast-1.3.0/optional_file/human_gl.aux
MOUSE_AUX	/usr/local/igblast-1.3.0/optional_file/mouse_gl.aux
IGDATA	/usr/local/igblast-1.3.0/


######################################
# dl_map README Entries Descriptions #
######################################

• These keys and values are used to point to IgBLAST IG VDJ databases for human.  Note that the database should be the official database from NCBI.

HUMAN_GL_IG_V	/usr/local/igblast-1.3.0/database_IG/human_gl_V
HUMAN_GL_IG_D	/usr/local/igblast-1.3.0/database_IG/human_gl_D
HUMAN_GL_IG_J	/usr/local/igblast-1.3.0/database_IG/human_gl_J

• These keys and values are used to point to IgBLAST TR VDJ databases for human.  Note that the database should be the official database from NCBI.

HUMAN_GL_TR_V	/usr/local/igblast-1.3.0/database_TR/human/human_TR_V
HUMAN_GL_TR_D	/usr/local/igblast-1.3.0/database_TR/human/human_TR_D.fna
HUMAN_GL_TR_J	/usr/local/igblast-1.3.0/database_TR/human/human_TR_J.fna

• These keys and values are used to point to IgBLAST IG VDJ databases for mouse.  Note that the database should be the official database from NCBI.

MOUSE_GL_IG_V	/usr/local/igblast-1.3.0/internal_data/mouse/mouse_V
MOUSE_GL_IG_D	/usr/local/igblast-1.3.0/internal_data/mouse/mouse_D
MOUSE_GL_IG_J	/usr/local/igblast-1.3.0/internal_data/mouse/mouse_J

• These keys and values are used to point to IgBLAST TR VDJ databases for mouse.  Note that the database should be the official database from NCBI.

MOUSE_GL_TR_V	/usr/local/igblast-1.3.0/internal_data/mouse/mouse_TR_V
MOUSE_GL_TR_D	/usr/local/igblast-1.3.0/internal_data/mouse/mouse_TR_D
MOUSE_GL_TR_J	/usr/local/igblast-1.3.0/internal_data/mouse/mouse_TR_J

• These keys and values are used to point to human and mouse auxiliary files (used by IgBLAST).  Note that the files should be the official files from NCBI included with IgBLAST.

HUMAN_AUX	/usr/local/igblast-1.3.0/optional_file/human_gl.aux
MOUSE_AUX	/usr/local/igblast-1.3.0/optional_file/mouse_gl.aux

• This key is used to set the IGDATA environment variable when IgBLASTn is run for proper lookup of region data.  

IGDATA	/usr/local/igblast-1.3.0/

Note that the directory referred to IGDATA should have under it the optional_file and internal_data directories.

#####################
# LOCUS PATCH FILES #
#####################

One may dynamically configure the GeneTables with patch files.  The
gene tables represent a hierarchical "n-ary" tree-like structure organizing the alleles.

To modify a GeneTable locus, the patch file LOCUS.html.patch is searched for.
For example, to modify the TRBJ locus for human, the file ROOT/human/GeneTables/TRBJ.html.patch
(note the pattern ROOT/ORGANISM/GeneTables/LOCUS.html.patch) is searched for.

The patch files consist of lines of tab-separted values of text.
The first value should be either "add" or "del" to either add or subtract
a hierarchy node.  The following values indicate from the locus root
the complete lineage to the node to be added(deleted).

For example, the patch file IGLJ.html.patch has the contents :
add	IGLJ5	IGLJ5*01

with 3-tab separated values saying to add under the IGLJ5 child of the IGLJ root of the organism
an allele named IGLJ5*01

To see the effect in more concrete terms, the "before and after" of the patch
is seen here :

BEFORE PATCHING, THE HIERARCHY IS  :
{'IGLJ1': {'IGLJ1*01': {}},
 'IGLJ2': {'IGLJ2*01': {}},
 'IGLJ3': {'IGLJ3*01': {}},
 'IGLJ3P': {'IGLJ3P*01': {}},
 'IGLJ4': {'IGLJ4*01': {}}}

AFTER PATCHING, THE HIERARCHY IS  :
{'IGLJ1': {'IGLJ1*01': {}},
 'IGLJ2': {'IGLJ2*01': {}},
 'IGLJ3': {'IGLJ3*01': {}},
 'IGLJ3P': {'IGLJ3P*01': {}},
 'IGLJ4': {'IGLJ4*01': {}},
 'IGLJ5': {'IGLJ5*01': {}}}


######################
# ANALYSIS MODE ONLY #
######################

Analysis mode does several things.

1) it examines reference data sequences (by allele name),
2) it parses downloaded IMGT gene tables for user examination of resulting hierarchies
3) it applies patches showing the before/after effects of patch files.

Users are encouraged to run vdj_db_dl.py with analysis mode to find instances where
IMGT reference alleles exist in the reference database BUT do not exist in the
gene tables and to create patch files for use so that patched Gene Tables
can be updated ("patched") to accomodate (usually missing) entries/spots for reference/database sequences.

When, run the analysis-only mode will highlight alleles existing in the reference directory database and
not in the Gene Table.  Such highlights are as seen below:

#####################################################################
item IGLJ5*01  is in  fasta alleles Mus_musculus_IGLJ but not in tree alleles Mus_musculus_IGLJ
fasta alleles Mus_musculus_IGLJ 	D	tree alleles Mus_musculus_IGLJ
IGLJ1*01 			IGLJ1*01
IGLJ2*01 			IGLJ2*01
IGLJ3*01 			IGLJ3*01
IGLJ3P*01 			IGLJ3P*01
IGLJ4*01 			IGLJ4*01
IGLJ4*01 			IGLJ4*01
IGLJ5*01 	<	
#####################################################################	

The "<" pointing to IGLJ5*01 under the "fasta alleles Mus_musculus_IGLJ" column indicates that the user
should create a patch file to add IGLJ5*01 to the gene table hiearchy/tree.






